
record(ai, "BLD:$(LOCA):$(NMBR):CHARGE") {
  field(DESC, "Beam Charge")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@CHARGE")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "nC")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFCHARGE")
  field(PRIO, "HIGH")
}

#record(sub, "BLD:$(LOCA):$(NMBR):CHARGETS") {
#    field(INAM, "subInit")
#    field(SNAM, "subProcess")
#    field(TSEL, "BLD:$(LOCA):$(NMBR):CHARGE.TIME")
#    field(FLNK, "BLD:$(LOCA):$(NMBR):EFCHARGE")
##    field(SCAN, "PASSIVE")
#}

record(ai, "BLD:$(LOCA):$(NMBR):ENERGY") {
  field(DESC, "Beam ENERGY")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@ENERGY")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "MeV")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFENERGY")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):POS_X") {
  field(DESC, "Beam Position X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@POS_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFPOS_X")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):POS_Y") {
  field(DESC, "Beam Position Y")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@POS_Y")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFPOS_Y")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):ANG_X") {
  field(DESC, "Beam Angle X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@ANG_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mrad")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFANG_X")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):ANG_Y") {
  field(DESC, "Beam Angle Y")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@ANG_Y")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mrad")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFANG_Y")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):BLEN") {
  field(DESC, "BC2 Charge")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@BC2CHARGE")
  field(PREC, "3")
  field(TSE,  "-2")
  field(EGU,  "Amps")
}

record(ai, "BLD:$(LOCA):$(NMBR):BC2CHARGE") {
  field(DESC, "BC2 Charge")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@BC2CHARGE")
  field(PREC, "3")
  field(TSE,  "-2")
  field(EGU,  "Amps")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFBC2CHARGE")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):BC2ENERGY") {
  field(DESC, "BC2 Energy")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@BC2ENERGY")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFBC2ENERGY")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):BC1CHARGE") {
  field(DESC, "BC1 Charge")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@BC1CHARGE")
  field(PREC, "3")
  field(TSE,  "-2")
  field(EGU,  "Amps")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFBC1CHARGE")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):BC1ENERGY") {
  field(DESC, "BC2 Energy")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@BC1ENERGY")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFBC1ENERGY")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):UND_POS_X") {
  field(DESC, "Beam Position X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@UND_POS_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFUND_POS_X")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):UND_POS_Y") {
  field(DESC, "Beam Position Y")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@UND_POS_Y")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFUND_POS_Y")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):UND_ANG_X") {
  field(DESC, "Beam Angle X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@UND_ANG_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mrad")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFUND_ANG_X")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):UND_ANG_Y") {
  field(DESC, "Beam Angle Y")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@UND_ANG_Y")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mrad")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFUND_ANG_Y")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):DMP_CHARGE") {
  field(DESC, "Dump Charge")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@DMP_CHARGE")
  field(PREC, "3")
  field(TSE,  "-2")
  field(EGU,  "Nel")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFDMP_CHARGE")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):XTCAV_AMP") {
  field(DESC, "XTCAV Amplitude")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@XTCAV_AMP")
  field(PREC, "3")
  field(TSE,  "-2")
  field(EGU,  "MV")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFXTCAV_AMP")
  field(PRIO, "HIGH")
}

# Shantha Condamoor: 7-Jul-2014: Added PHOTONENERGY,LTU450_POS_X and LTU250_POS_X

record(ai, "BLD:$(LOCA):$(NMBR):PHOTONENERGY") {
  field(DESC, "Photon Energy")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@PHOTONENERGY")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "eV")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EFPHOTONENERGY")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):$(BPM2)_POS_X") {
  field(DESC, "Beam Position X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@LTU450_POS_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EF$(BPM2)_POS_X")
  field(PRIO, "HIGH")
}

record(ai, "BLD:$(LOCA):$(NMBR):$(BPM1)_POS_X") {
  field(DESC, "Beam Position X")
  field(SCAN, "$(DIAG_SCAN)")
  field(DTYP, "BLD_SNDR")
  field(INP,  "@LTU250_POS_X")
  field(PREC, "5")
  field(TSE,  "-2")
  field(EGU,  "mm")
  field(FLNK, "BLD:$(LOCA):$(NMBR):EF$(BPM1)_POS_X")
  field(PRIO, "HIGH")
}

record(longin, "BLD:$(LOCA):$(NMBR):MCASTSENT") {
	field(DESC, "MC Messages Sent")
	field(SCAN, "1 second")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_msg_s,m32")
}

record( calc, "BLD:$(LOCA):$(NMBR):MCASTRATE" )
{
	field( SCAN, "1 second" )
	field( INPA, "BLD:$(LOCA):$(NMBR):MCASTSENT" )
	field( INPB, "BLD:$(LOCA):$(NMBR):MCASTRATE.LA" )
	field( INPC, "0.4" )
	field( CALC, "VAL*C+(A-B)*(1-C)" )
	field( LOLO, "$(LOLO=9)" )
	field( LOW,  "$(LOW=119)" )
	field( HIGH, "$(HIGH=121)" )
	field( HIHI, "$(HIHI=361)" )
	field( LSV,  "$(LSV=MINOR)" )
	field( LLSV, "$(LLSV=MAJOR)" )
	field( HSV,  "$(HSV=MINOR)" )
	field( HHSV, "$(HHSV=MAJOR)" )
	field( EGU,  "Pkt/Sec" )
	field( PREC, "1" )
}

record(longin, "BLD:$(LOCA):$(NMBR):FCOMLATMIN") {
	field(DESC, "Min. FCOM Latency")
	field(EGU,  "uS")
	field(SCAN, "$(STAT_SCAN)")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_min_f,m32")
}

# just write .PROC
record(longout, "BLD:$(LOCA):$(NMBR):FCOMLATMINRST") {
	field(DESC, "Rst. Min. FCOM Latency")
	field(SCAN, "Passive")
	field(DTYP, "BusAddress")
	field(OUT,  "#C0S2@bld_stat_min_f,m32")
	field(VAL,  "-1")
	field(PINI, "YES")
}

record(longin, "BLD:$(LOCA):$(NMBR):FCOMLATMAX") {
	field(DESC, "Max. FCOM Latency")
	field(EGU,  "uS")
	field(SCAN, "$(STAT_SCAN)")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_max_f,m32")
}

# just write .PROC
record(longout, "BLD:$(LOCA):$(NMBR):FCOMLATMAXRST") {
	field(DESC, "Rst. Max. FCOM Latency")
	field(SCAN, "Passive")
	field(DTYP, "BusAddress")
	field(OUT,  "#C0S2@bld_stat_max_f,m32")
	field(VAL,  "0")
	field(PINI, "YES")
}

record(longin, "BLD:$(LOCA):$(NMBR):FCOMLATAVG") {
	field(DESC, "Avg. FCOM Latency")
	field(EGU,  "uS")
	field(SCAN, "$(STAT_SCAN)")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_avg_f,m32")
}

record(longin, "BLD:$(LOCA):$(NMBR):BLDLATMAX") {
	field(DESC, "Max. BLD Post Latency")
	field(EGU,  "uS")
	field(SCAN, "$(STAT_SCAN)")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_max_p,m32")
}

# just write .PROC
record(longout, "BLD:$(LOCA):$(NMBR):BLDLATMAXRST") {
	field(DESC, "Rst. Max. BLD Post Latency")
	field(SCAN, "Passive")
	field(DTYP, "BusAddress")
	field(OUT,  "#C0S2@bld_stat_max_p,m32")
	field(VAL,  "0")
	field(PINI, "YES")
}

record(longin, "BLD:$(LOCA):$(NMBR):BLDLATAVG") {
	field(DESC, "Avg. BLD Latency")
	field(EGU,  "uS")
	field(SCAN, "$(STAT_SCAN)")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_stat_avg_p,m32")
}

record(bi,     "BLD:$(LOCA):$(NMBR):FC_MODE") {
	field(DESC, "Flag: FCOM sync/async mode")
	field(DTYP, "BusAddress")
	field(INP,  "#C0S2@bld_fcom_use_s,m32")
	field(PINI, "YES")
	field(ZNAM, "ASYNC")
	field(ONAM, "SYNC")
}

record(ao,     "BLD:$(LOCA):$(NMBR):FC_POLL_DELAY") {
	field(DESC, "FID to FCOM Sampling Dly")
	field(SCAN, "Passive")
	field(DTYP, "BusAddress")
	field(OUT,  "#C0S2@0xdeadbeec,bld_timer_io")
	field(EGU,  "uS")
	field(LOPR, "100")
	field(HOPR, "8000")
	field(DRVL, "100")
	field(DRVH, "8000")
	field(VAL,  "5000")
	field(PINI, "YES")
}

record(ao, "BLD:$(LOCA):$(NMBR):ETAX") {
    field(DESC, "ETAX used in Photon Energy Calculation")
    field(VAL,  "$(ETAX)")
    field(PINI, "1")
    field(SCAN, "Passive")
    field(DTYP, "BLD_SCALAR")
    field(OUT,  "@ETAX")
    field(EGU,  "mm")
    field(PREC, "5")
    info(autosaveFields, "VAL")
}
